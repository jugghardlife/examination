<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="minimal-ui=yes,width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<title>添加学生信息</title>
	<link rel="stylesheet" href="__PUBLIC__/admin/css/see.css">
	<link rel="stylesheet" href="__PUBLIC__/admin/css/addStudentA.css">
	<link rel="stylesheet" href="__PUBLIC__/public/css/public.css">
	<script src="__PUBLIC__/public/js/jq.js"></script>
</head>
<body class="see_body">
	<div class="content_top">
		<div></div>
		<div class="content_top_content">
			<div class="username"><span>管理：</span><p>{$Think.session.username}</p></div>
			<div class="user_exit" onclick="adminLogout()"><span><?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1528439492800" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1051" xmlns:xlink="http://www.w3.org/1999/xlink" width="12" height="12"><defs><style type="text/css"></style></defs><path d="M511.5 548.3c-10.3 0-18.6-8.3-18.6-18.6V82.6c0-10.3 8.3-18.6 18.6-18.6s18.6 8.3 18.6 18.6v447.1c0 10.3-8.3 18.6-18.6 18.6z" fill="#fd0000" p-id="1052"></path><path d="M511.5 959c-247 0-447.9-200.1-447.9-446 0-149.8 74.9-288.7 200.3-371.7 8.6-5.7 20.1-3.3 25.8 5.3 5.7 8.6 3.3 20.1-5.3 25.8-115 76.1-183.6 203.4-183.6 340.7 0 225.4 184.2 408.8 410.6 408.8S922.1 738.4 922.1 513c0-136.1-67.8-262.9-181.3-339.1-8.5-5.7-10.8-17.3-5.1-25.9 5.7-8.5 17.3-10.8 25.9-5.1 123.8 83.2 197.8 221.5 197.8 370-0.1 246-201 446.1-447.9 446.1z" fill="#fd0000" p-id="1053"></path></svg></span><button >注销</button></div>
		</div>
	</div>
	<div class="see_box">
		<div class="see_header">
			<h3>添加学生信息</h3>
		</div>
		<div class="see_content">
			<div class="see_content_top">
				<div class="see_content_top_name"><span>姓名:</span><input type="text" placeholder="请输入您的学号"></div>
				<div class="see_content_top_num"><span>学号:</span><input type="text" onKeyUp="value=value.replace(/[^\d]/g,'')" onafterpaste="this.value=this.value.replace(/[^\d]/g,'')" placeholder="请输入您的学号" maxlength="15"></div>
				<div class="see_content_top_last"><span>班级:</span>
					<select class="change_select_val">
					  <option value ="1">化工1（国际化）</option>
					  <option value ="2">化工2</option>
					  <option value="3">工分1</option>
					  <option value="4">装备1</option>
					  <option value="0">未分班</option>
					</select>
				</div>
				<!-- <div class="see_content_top_last">排名:<span>1</span></div> -->
			</div> 
			<div class="see_content_bottom">
				<div class="see_content_bottom_big">
					<div class="see_content_bottom_small">
						<div>
							实用英语
						</div>
						<div>
							<input type="text" class="stuS1">
						</div>
					</div>
					<div class="see_content_bottom_small">
						<div>
							高等数学
						</div>
						<div class="see_last">
							<input type="text" class="stuS2">
						</div>
					</div>
				</div>
				<div class="see_content_bottom_big">
					<div class="see_content_bottom_small">
						<div>
							无机化学	
						</div>
						<div>
							<input type="text" class="stuS3">
						</div>
					</div>
					<div class="see_content_bottom_small">
						<div>
							有机化学
						</div>
						<div class="see_last">
							<input type="text" class="stuS4">
						</div>
					</div>
				</div>
				<div class="see_content_bottom_big">
					<div class="see_content_bottom_small">
						<div>
							物理化学
						</div>
						<div>
							<input type="text" class="stuS5">
						</div>
					</div>
					<div class="see_content_bottom_small">
						<div>
							化学分析检验技术
						</div>
						<div class="see_last">
							<input type="text" class="stuS6">
						</div>
					</div>
				</div>
				<div class="see_content_bottom_big">
					<div class="see_content_bottom_small">
						<div>志愿A</div>
						<div>
							<select class="fill_first_val">
							  <option value ="1">应用化工技术（国际化）</option>
							  <option value ="2">应用化工技术</option>
							  <option value="3">工业分析技术</option>
							  <option value="4">化工装备技术</option>
							</select>
						</div>
					</div>
					<div class="see_content_bottom_small">
						<div>志愿B</div>
						<div class="see_last">
							<select class="fill_second_val">
							  <option value ="1">应用化工技术（国际化）</option>
							  <option value ="2">应用化工技术</option>
							  <option value="3">工业分析技术</option>
							  <option value="4">化工装备技术</option>
							</select>
						</div>
					</div>
				</div>
				<div class="see_content_bottom_big">
					<div class="see_content_bottom_small">
						<div>志愿C</div>
						<div>
							<select class="fill_third_val">
							  <option value ="1">应用化工技术（国际化）</option>
							  <option value ="2">应用化工技术</option>
							  <option value="3">工业分析技术</option>
							  <option value="4">化工装备技术</option>
							</select>
						</div>
					</div>
					<div class="see_content_bottom_small">
						<div>志愿D</div>
						<div class="see_last">
							<select class="fill_fourth_val">
							  <option value ="1">应用化工技术（国际化）</option>
							  <option value ="2">应用化工技术</option>
							  <option value="3">工业分析技术</option>
							  <option value="4">化工装备技术</option>
							</select>
						</div>
					</div>
				</div>
			</div>
			<div class="stulogin_but">
				<button class="stulogin_in">新增</button>
				<button class="stulogin_back" onclick="javascript :history.back(-1);">取消</button>
			</div>
		</div>
	</div>	
	<script>
		function adminLogout()
		{
			$.ajax({
				url: "{:U('Admin/index/adminLogout')}",
				type: 'post',
				success: function (data) {
					console.log(data)
					if(1==data.status)
					{
						window.location.href="{:U('Admin/Index/adminLogin')}";
					}
				},
				error: function (XmlHttpRequest) {
					alert(XmlHttpRequest.status);
				}
			})
		}
	</script>
	<script>
		$(".stulogin_in").click(function(){
			if(null==$(".see_content_top_name").find("input").val()||""==$(".see_content_top_name").find("input").val())
			{
				alert("姓名不能为空")
				return;
			}
			else if(null==$(".see_content_top_num").find("input").val()||""==$(".see_content_top_num").find("input").val())
			{
				alert("学号不能为空")
				return;
			}
			else if(null==$(".see_content_top_last").find("select").val()||""==$(".see_content_top_last").find("select").val())
			{
				alert("班级不能为空")
				return;
			}
			else if(null==$(".stuS1").val()||""==$(".stuS1").val())
			{
				alert("成绩1不能为空")
				return;
			}
			else if(null==$(".stuS2").val()||""==$(".stuS2").val())
			{
				alert("成绩2不能为空")
				return;
			}
			else if(null==$(".stuS3").val()||""==$(".stuS3").val())
			{
				alert("成绩3不能为空")
				return;
			}
			else if(null==$(".stuS4").val()||""==$(".stuS4").val())
			{
				alert("成绩4不能为空")
				return;
			}
			else if(null==$(".stuS5").val()||""==$(".stuS5").val())
			{
				alert("成绩5不能为空")
				return;
			}
			else if(null==$(".stuS6").val()||""==$(".stuS6").val())
			{
				alert("成绩6不能为空")
				return;
			}

			var arr=[$(".fill_first_val").val(),$(".fill_second_val").val(),$(".fill_third_val").val(),$(".fill_fourth_val").val()];
			for(var i =0;i<arr.length;i++){
				for(var j=i+1;j<arr.length;j++){
					if(arr[i]==arr[j]){
						alert("志愿不能相同");
						return;	
					}
				}
			}


			$.ajax({
				url: "{:U('Admin/Index/addStuA')}",
				data: {
						'stuName': $(".see_content_top_name").find("input").val(),
						'stuNum':$(".see_content_top_num").find("input").val(),
						'stuClass':$(".see_content_top_last").find("select").val(),
						'stuS1':$(".stuS1").val(),
						'stuS2':$(".stuS2").val(),
						'stuS3':$(".stuS3").val(),
						'stuS4':$(".stuS4").val(),
						'stuS5':$(".stuS5").val(),
						'stuS6':$(".stuS6").val(),
						'stuVol1':$(".fill_first_val").val(),
						'stuVol2':$(".fill_second_val").val(),
						'stuVol3':$(".fill_third_val").val(),
						'stuVol4':$(".fill_third_val").val(),
					  },
				dataType : 'json', 
				type: 'post',
				success: function (data) {
					console.log(data)
					if(1==data.status)
					{	
						alert("添加成功");
						window.location.href="{:U('Admin/index/changeClass')}";
					}else if(0==data.status)
					{
						alert("添加失败");
					}
				}
			})
		})
	</script>
</body>
</html>